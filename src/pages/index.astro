---
import { site } from "./data/site";
const year = new Date().getFullYear();

function pillList(items: string[]) {
  return items.map((x) => `<span class="pill">${x}</span>`).join("");
}
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{site.name} — Engineering Portfolio</title>
    <meta name="description" content={`${site.name} — ${site.headline}`} />

    <style>
      :root{
        --bg:#0b0f19; --card:#10182a; --text:#eaf0ff; --muted:#a9b6da;
        --line:rgba(255,255,255,.10); --accent:#7aa2ff;
      }
      body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
        background: radial-gradient(1200px 800px at 15% 0%, rgba(122,162,255,.16), transparent 60%),
                    radial-gradient(900px 700px at 90% 10%, rgba(255,122,211,.10), transparent 60%),
                    var(--bg);
        color:var(--text);
      }
      a{color:var(--text);text-decoration:none}
      a:hover{color:var(--accent)}
      .wrap{max-width:1000px;margin:0 auto;padding:26px 18px 60px}
      .top{display:flex;gap:14px;flex-wrap:wrap;align-items:stretch}
      .card{background:rgba(255,255,255,.02);border:1px solid var(--line);border-radius:18px;padding:18px}
      .hero{flex:2 1 620px}
      .side{flex:1 1 320px}
      h1{margin:0;font-size:24px;letter-spacing:.2px}
      .headline{color:var(--muted);margin-top:6px}
      .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
      .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border-radius:12px;
        border:1px solid var(--line);background:rgba(255,255,255,.03)}
      .btn:hover{border-color:rgba(122,162,255,.45)}
      .pill{font-size:12px;padding:6px 10px;border:1px solid var(--line);border-radius:999px;
        background:rgba(255,255,255,.02);color:#dfe8ff}
      h2{margin:0 0 12px;font-size:14px;letter-spacing:.45px;text-transform:uppercase;color:var(--muted)}
      .grid{display:grid;gap:14px;grid-template-columns:repeat(12,1fr);margin-top:14px}
      .span6{grid-column:span 6}
      .span12{grid-column:span 12}
      @media (max-width:820px){.span6{grid-column:span 12}.side{flex:1 1 320px}}
      .item{padding:12px;border:1px solid var(--line);border-radius:14px;background:rgba(255,255,255,.015)}
      .title{font-weight:700}
      .meta{color:var(--muted);font-size:13px;margin-top:3px}
      ul{margin:10px 0 0;padding-left:18px}
      li{margin:6px 0;color:#dbe6ff}
      footer{margin-top:22px;color:var(--muted);font-size:13px;text-align:center}
      .thumb{
        width:100%;
        height:160px;
        border-radius:12px;
        border:1px solid var(--line);
        background:rgba(255,255,255,.02);
        overflow:hidden;
        display:flex;
        align-items:center;
        justify-content:center;
        color:var(--muted);
        font-size:12px;
      }
      .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    </style>
  </head>

  <body>
    <main class="wrap">
      <!-- HERO -->
      <section class="top">
        <div class="card hero">
          <div class="row" style="justify-content:space-between;">
            <div>
              <h1>{site.name}</h1>
              <div class="headline">{site.headline} · {site.location}</div>
            </div>
            <div class="row">
              <a class="btn" href="/cv.pdf" download>CV (PDF)</a>
              <a class="btn" href="/portfolio.pdf" download>Portfolio (PDF)</a>
              <a class="btn" href={`mailto:${site.email}`}>Email</a>
            </div>
          </div>

          <div class="item" style="margin-top:14px">
            <h2>Profile</h2>
            <ul>
              {site.summary.map((s) => <li>{s}</li>)}
            </ul>

            {site.focus?.length ? (
              <div class="row" style="margin-top:12px">
                {site.focus.map((f) => <span class="pill">{f}</span>)}
              </div>
            ) : null}
          </div>
        </div>

        <aside class="card side">
          <h2>Contact</h2>
          <div class="row" style="flex-direction:column;align-items:flex-start;">
            <a class="pill" href={`mailto:${site.email}`}>{site.email}</a>
            {site.phone ? <span class="pill">{site.phone}</span> : null}
          </div>

          <h2 style="margin-top:16px">Links</h2>
          <div class="row">
            <a class="pill" href={site.links.linkedin} target="_blank">LinkedIn</a>
            <a class="pill" href={site.links.github} target="_blank">GitHub</a>
          </div>

          <h2 style="margin-top:16px">Languages</h2>
          <div class="row">
            {site.languages.map((l) => <span class="pill">{l.name} · {l.level}</span>)}
          </div>

          <h2 style="margin-top:16px">Education</h2>
          <div class="row" style="flex-direction:column;align-items:flex-start;">
            {site.education.map((e) => (
              <div class="item" style="width:100%">
                <div class="title">{e.degree}</div>
                <div class="meta">{e.school} · {e.dates}</div>
                {e.details ? <div class="meta">{e.details}</div> : null}
              </div>
            ))}
          </div>
        </aside>
      </section>

      <!-- EXPERIENCE -->
      <section class="grid">
        <div class="card span12">
          <h2>Industry experience</h2>
          <div class="grid" style="margin-top:0">
            {site.experience.map((x) => (
              <div class="item span6">
                <div class="title">{x.company} — {x.role}</div>
                <div class="meta">{x.location} · {x.dates}</div>
                <ul>
                  {x.bullets.map((b) => <li>{b}</li>)}
                </ul>
              </div>
            ))}
          </div>
        </div>
      </section>

      <!-- COMPETENCIES -->
      <section class="grid">
        <div class="card span12">
          <h2>Core competencies</h2>
          <div class="grid" style="margin-top:0">
            <div class="item span6">
              <div class="title">Manufacturing mindset</div>
              <div class="meta">Quality, repeatability, test, documentation</div>
              <div class="row" style="margin-top:8px" set:html={pillList(site.competencies.ManufacturingMindset)} />
            </div>
            <div class="item span6">
              <div class="title">Engineering</div>
              <div class="meta">Mechatronics & prototyping</div>
              <div class="row" style="margin-top:8px" set:html={pillList(site.competencies.Engineering)} />
            </div>
            <div class="item span6">
              <div class="title">Software & control</div>
              <div class="meta">Automation + analysis</div>
              <div class="row" style="margin-top:8px" set:html={pillList(site.competencies.SoftwareData)} />
            </div>
            <div class="item span6">
              <div class="title">Electronics & tools</div>
              <div class="meta">Hands-on work</div>
              <div class="row" style="margin-top:8px" set:html={pillList(site.competencies.Tools)} />
            </div>
          </div>
        </div>

        <!-- PROJECTS -->
        <div class="card span12">
          <h2>Selected engineering projects</h2>

          <div class="grid" style="margin-top:0">
            {site.schoolProjects.map((p) => (
              <div class="item span6">
                <div class="thumb" style="margin-bottom:10px">
                  {p.image ? <img src={p.image} alt={p.imageAlt ?? ""} loading="lazy" /> : <span>Project image (add later)</span>}
                </div>

                <div class="title">{p.title}</div>
                <div class="row" style="margin-top:8px">
                  {p.tags.map((t) => <span class="pill">{t}</span>)}
                </div>
                <ul>
                  {p.bullets.map((b) => <li>{b}</li>)}
                </ul>
                {p.link ? (
                  <div class="row" style="margin-top:10px">
                    <a class="pill" href={p.link} target="_blank">Link</a>
                  </div>
                ) : null}
              </div>
            ))}
          </div>

          <div class="grid" style="margin-top:0">
            {site.personalProjects.map((p) => (
              <div class="item span6">
                <div class="thumb" style="margin-bottom:10px">
                  {p.image ? <img src={p.image} alt={p.imageAlt ?? ""} loading="lazy" /> : <span>Project image (add later)</span>}
                </div>

                <div class="title">{p.title}</div>
                <div class="row" style="margin-top:8px">
                  {p.tags.map((t) => <span class="pill">{t}</span>)}
                </div>
                <ul>
                  {p.bullets.map((b) => <li>{b}</li>)}
                </ul>
                {p.link ? (
                  <div class="row" style="margin-top:10px">
                    <a class="pill" href={p.link} target="_blank">Link</a>
                  </div>
                ) : null}
              </div>
            ))}
          </div>
        </div>

        <!-- HOBBIES -->
        <div class="card span12">
          <h2>Hobbies</h2>
          <div class="row">
            {site.hobbies.map((h) => <span class="pill">{h}</span>)}
          </div>
        </div>
      </section>

      <footer>© {year} {site.name} · Built with Astro · Hosted on GitHub Pages</footer>
    </main>
  </body>
</html>
